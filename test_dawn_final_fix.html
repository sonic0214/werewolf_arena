<!DOCTYPE html>
<html>
<head>
    <title>å¤©äº®å…¬å‘Šä¿®å¤éªŒè¯</title>
    <meta charset="utf-8">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #1a1f2e;
            color: #e7e9ea;
        }
        .test-case {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #475569;
            border-radius: 8px;
            background: #334155;
        }
        .problem { color: #ef4444; }
        .solution { color: #10b981; }
        .improvement { color: #f59e0b; }
        .code {
            background: #0f1419;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }
        .status.success {
            background: #065f46;
            border: 1px solid #10b981;
        }
        .status.error {
            background: #7f1d1d;
            border: 1px solid #ef4444;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ å¤©äº®å…¬å‘Šæ—¶åºä¿®å¤éªŒè¯</h1>

    <div class="test-case">
        <h3>ğŸš¨ åŸé—®é¢˜æè¿°</h3>
        <div class="problem">
            <p><strong>é—®é¢˜ç°è±¡ï¼š</strong></p>
            <ul>
                <li>âŒ å¤©äº®å…¬å‘Š"å¤©äº®äº†ï¼æ˜¨æ™šJacksonè¢«æ·˜æ±°äº†"åœ¨å¤œé—´è¡ŒåŠ¨æœªå®Œæˆæ—¶å°±æ˜¾ç¤º</li>
                <li>âŒ ç”¨æˆ·çœ‹åˆ°çš„é¡ºåºï¼šç‹¼äººå‡»æ€ â†’ å¤©äº®å…¬å‘Š â†’ åŒ»ç”Ÿä¿æŠ¤</li>
                <li>âŒ ç ´åäº†æ¸¸æˆçš„å™äº‹è¿è´¯æ€§å’Œé€»è¾‘é¡ºåº</li>
            </ul>
        </div>
    </div>

    <div class="test-case">
        <h3>ğŸ” æ ¹æœ¬åŸå› åˆ†æ</h3>
        <div class="solution">
            <p><strong>åŸå› å®šä½ï¼š</strong></p>
            <p>åœ¨ <code>generateLiveMessages()</code> æ–¹æ³•ä¸­ï¼Œå¤©äº®å…¬å‘Šçš„é€»è¾‘ä½ç½®é”™è¯¯ï¼š</p>
            <ul>
                <li>å¤©äº®å…¬å‘Šæ¡ä»¶åˆ¤æ–­ä½äºå¤œé—´è¡ŒåŠ¨å¤„ç†å¾ªç¯å†…éƒ¨</li>
                <li>åªè¦ <code>roundState?.eliminated !== undefined</code> å°±ç«‹å³è§¦å‘</li>
                <li>æ²¡æœ‰ç­‰å¾…æ‰€æœ‰å¤œé—´è¡ŒåŠ¨ï¼ˆæŸ¥éªŒâ†’å‡»æ€â†’ä¿æŠ¤ï¼‰å¤„ç†å®Œæˆ</li>
            </ul>
        </div>
    </div>

    <div class="test-case">
        <h3>âœ… ä¿®å¤æ–¹æ¡ˆ</h3>
        <div class="improvement">
            <p><strong>ä¿®å¤æªæ–½ï¼š</strong></p>
            <ol>
                <li>ğŸ“ <strong>ä½ç½®è°ƒæ•´ï¼š</strong>å°†å¤©äº®å…¬å‘Šç§»åˆ°å¤œé—´è¡ŒåŠ¨å¤„ç†å®Œæˆå</li>
                <li>â±ï¸ <strong>æ—¶åºæ§åˆ¶ï¼š</strong>ç¡®ä¿æŸ¥éªŒâ†’å‡»æ€â†’ä¿æŠ¤â†’å¤©äº®å…¬å‘Šçš„æ­£ç¡®é¡ºåº</li>
                <li>ğŸ”„ <strong>çŠ¶æ€ç®¡ç†ï¼š</strong>æ·»åŠ å¤œé—´é˜¶æ®µå®ŒæˆçŠ¶æ€æ ‡è®°</li>
            </ol>

            <h4>ä¿®å¤å‰çš„é”™è¯¯æµç¨‹ï¼š</h4>
            <div class="code">
// å¤„ç†å¤œé—´è¡ŒåŠ¨
if (roundLog.investigate) { /* æŸ¥éªŒè¡ŒåŠ¨ */ }
if (roundLog.eliminate) { /* å‡»æ€è¡ŒåŠ¨ */ }
if (roundLog.protect) { /* ä¿æŠ¤è¡ŒåŠ¨ */ }

// âŒ é”™è¯¯ï¼šåœ¨å¤œé—´è¡ŒåŠ¨å¾ªç¯å†…éƒ¨ç«‹å³æ˜¾ç¤ºå¤©äº®å…¬å‘Š
if (roundState?.eliminated !== undefined) {
    this.addSystemMessage(`å¤©äº®äº†ï¼æ˜¨æ™š${eliminatedPlayer}è¢«æ·˜æ±°äº†`);
}
            </div>

            <h4>ä¿®å¤åçš„æ­£ç¡®æµç¨‹ï¼š</h4>
            <div class="code">
// å¤„ç†å¤œé—´è¡ŒåŠ¨ - æŒ‰æ­£ç¡®é¡ºåº
if (roundLog.investigate) { /* æŸ¥éªŒè¡ŒåŠ¨ */ }
if (roundLog.eliminate) { /* å‡»æ€è¡ŒåŠ¨ */ }
if (roundLog.protect) { /* ä¿æŠ¤è¡ŒåŠ¨ */ }

// âœ… æ­£ç¡®ï¼šå¤œé—´è¡ŒåŠ¨å®Œæˆåï¼Œå†æ˜¾ç¤ºå¤©äº®å…¬å‘Š
this.updatePhaseState('night', 'completed', 'å¤œé—´è¡ŒåŠ¨å®Œæˆ');
if (roundState?.eliminated !== undefined) {
    this.addSystemMessage(`å¤©äº®äº†ï¼æ˜¨æ™š${eliminatedPlayer}è¢«æ·˜æ±°äº†`);
}
            </div>
        </div>
    </div>

    <div class="test-case">
        <h3>ğŸ¯ é¢„æœŸä¿®å¤æ•ˆæœ</h3>
        <div class="solution">
            <h4>ä¿®å¤åçš„æ­£ç¡®æ˜¾ç¤ºé¡ºåºï¼š</h4>
            <ol>
                <li>ğŸ” <strong>é¢„è¨€å®¶æŸ¥éªŒè¡ŒåŠ¨ï¼š</strong>"ğŸŒ™ å¤œé—´è¡ŒåŠ¨ï¼šæŸ¥éªŒç›®æ ‡ï¼šGinger"</li>
                <li>ğŸ—¡ï¸ <strong>ç‹¼äººå‡»æ€è¡ŒåŠ¨ï¼š</strong>"ğŸŒ™ å¤œé—´è¡ŒåŠ¨ï¼šå‡»æ€ç›®æ ‡ï¼šJackson"</li>
                <li>ğŸ›¡ï¸ <strong>åŒ»ç”Ÿä¿æŠ¤è¡ŒåŠ¨ï¼š</strong>"ğŸŒ™ å¤œé—´è¡ŒåŠ¨ï¼šä¿æŠ¤ç›®æ ‡ï¼šIsaac"</li>
                <li>ğŸ“¢ <strong>å¤©äº®å…¬å‘Šï¼š</strong>"ğŸ“¢ å¤©äº®äº†ï¼æ˜¨æ™šJacksonè¢«æ·˜æ±°äº†"</li>
                <li>â˜€ï¸ <strong>ç™½å¤©é˜¶æ®µå¼€å§‹ï¼š</strong>ç«æ‹å‘è¨€æƒç­‰æ´»åŠ¨</li>
            </ol>

            <p><strong>ç”¨æˆ·ä½“éªŒæ”¹å–„ï¼š</strong></p>
            <ul>
                <li>âœ… å®Œæ•´æ˜¾ç¤ºæ‰€æœ‰å¤œé—´è¡ŒåŠ¨ï¼Œç¬¦åˆæ¸¸æˆé€»è¾‘</li>
                <li>âœ… å¤©äº®å…¬å‘Šåœ¨æ­£ç¡®æ—¶æœºæ˜¾ç¤ºï¼Œæ•…äº‹è¿è´¯</li>
                <li>âœ… ç”¨æˆ·èƒ½çœ‹åˆ°å®Œæ•´çš„å¤œé—´é˜¶æ®µä¿¡æ¯</li>
                <li>âœ… ç¡®ä¿æ¸¸æˆå™äº‹çš„å®Œæ•´æ€§å’Œé€»è¾‘æ€§</li>
            </ul>
        </div>
    </div>

    <div class="test-case">
        <h3>ğŸ§ª æµ‹è¯•éªŒè¯</h3>
        <p>è¦éªŒè¯æ­¤ä¿®å¤ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>
        <ol>
            <li>ç¡®ä¿WebæœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼š<code>python3 web_server.py</code></li>
            <li>åˆ›å»ºä¸€ä¸ªæ–°çš„æ¸¸æˆä¼šè¯</li>
            <li>è§‚å¯Ÿæ¸¸æˆç›´æ’­é¡µé¢çš„å¤œé—´é˜¶æ®µæ˜¾ç¤º</li>
            <li>ç¡®è®¤æ¶ˆæ¯æ˜¾ç¤ºé¡ºåºä¸ºï¼šæŸ¥éªŒ â†’ å‡»æ€ â†’ ä¿æŠ¤ â†’ å¤©äº®å…¬å‘Š</li>
        </ol>

        <button class="test-button" onclick="openLiveStream()">
            ğŸ® æ‰“å¼€æ¸¸æˆç›´æ’­æµ‹è¯•
        </button>
        <button class="test-button" onclick="openTestPage()">
            ğŸ“‹ æ‰“å¼€æµ‹è¯•æ–‡æ¡£é¡µé¢
        </button>

        <div id="test-status"></div>
    </div>

    <div class="test-case">
        <h3>ğŸ“Š ä¿®å¤éªŒè¯æ¸…å•</h3>
        <div>
            <label>
                <input type="checkbox" id="check1"> é¢„è¨€å®¶æŸ¥éªŒè¡ŒåŠ¨æ­£å¸¸æ˜¾ç¤º
            </label>
        </div>
        <div>
            <label>
                <input type="checkbox" id="check2"> ç‹¼äººå‡»æ€è¡ŒåŠ¨æ­£å¸¸æ˜¾ç¤º
            </label>
        </div>
        <div>
            <label>
                <input type="checkbox" id="check3"> åŒ»ç”Ÿä¿æŠ¤è¡ŒåŠ¨æ­£å¸¸æ˜¾ç¤º
            </label>
        </div>
        <div>
            <label>
                <input type="checkbox" id="check4"> å¤©äº®å…¬å‘Šåœ¨æ‰€æœ‰å¤œé—´è¡ŒåŠ¨åæ˜¾ç¤º
            </label>
        </div>
        <div>
            <label>
                <input type="checkbox" id="check5"> æ¶ˆæ¯é¡ºåºç¬¦åˆæ¸¸æˆé€»è¾‘
            </label>
        </div>
        <button class="test-button" onclick="validateFix()">
            âœ… éªŒè¯ä¿®å¤æ•ˆæœ
        </button>
    </div>

    <script>
        function openLiveStream() {
            window.open('http://localhost:8081/', '_blank');
            showStatus('å·²æ‰“å¼€æ¸¸æˆç›´æ’­é¡µé¢ï¼Œè¯·åˆ›å»ºæ–°æ¸¸æˆè¿›è¡Œæµ‹è¯•', 'success');
        }

        function openTestPage() {
            window.open('/test_dawn_timing.html', '_blank');
            showStatus('å·²æ‰“å¼€æµ‹è¯•æ–‡æ¡£é¡µé¢', 'success');
        }

        function validateFix() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const checked = document.querySelectorAll('input[type="checkbox"]:checked');

            if (checked.length === checkboxes.length) {
                showStatus('ğŸ‰ ä¿®å¤éªŒè¯é€šè¿‡ï¼æ‰€æœ‰æ£€æŸ¥é¡¹éƒ½å·²ç¡®è®¤', 'success');
            } else {
                showStatus(`âš ï¸ è¿˜æœ‰ ${checkboxes.length - checked.length} é¡¹éœ€è¦éªŒè¯`, 'error');
            }
        }

        function showStatus(message, type) {
            const statusDiv = document.getElementById('test-status');
            statusDiv.className = `status ${type}`;
            statusDiv.textContent = message;
            statusDiv.style.display = 'block';

            // 5ç§’åè‡ªåŠ¨éšè—
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 5000);
        }

        // é¡µé¢åŠ è½½æ—¶éšè—çŠ¶æ€
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('test-status').style.display = 'none';
        });
    </script>
</body>
</html>